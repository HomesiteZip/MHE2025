<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mobile Event App</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background-color: #fadbdf;
    font-family: Arial, sans-serif;
  }
  #app {
    max-width: 400px;
    margin: 0 auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    border: 2px solid #001FE9;
    border-top: none;
  }
  header {
    text-align: center;
    font-weight: bold;
    font-size: 1.25rem;
    color: #001FE9;
    padding: 12px 0;
    border-bottom: 2px solid #001FE9;
    background-color: #fadbdf;
  }
  main {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    background-color: #fadbdf;
    position: relative;
  }
  nav {
    display: flex;
    border-top: 2px solid #001FE9;
  }
  nav button {
    flex: 1;
    padding: 10px 0;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    background-color: #fadbdf;
    color: #001FE9;
    transition: background-color 0.3s, color 0.3s;
    border-right: 2px solid #001FE9;
  }
  nav button:last-child {
    border-right: none;
  }
  nav button.active {
    background-color: #001FE9;
    color: #FFF2DA;
  }
  .tab-home {
    height: 100%;
    background-image: url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1200&q=80');
    background-size: cover;
    background-position: center;
  }
  .person {
    max-width: 100%;
  }
  /* 올리버만 상단 100px 여백 */
  .person.oliver {
    margin-top: 100px;
    margin-bottom: 70px;
  }
  /* 클레어, 제임스 사이 70px 여백 */
  .person.not-first {
    margin-bottom: 70px;
  }
  /* 기본 없애고 나머지 사람 */
  .person:not(.oliver):not(:last-child) {
    margin-bottom: 70px;
  }
  /* 가운데 정렬과 기본 스타일 */
  .person-header {
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 1.25rem;
    color: #001FE9;
    margin-bottom: 8px;
    gap: 6px;
    justify-content: center; /* 모두 가운데 정렬 */
  }
  .emoji { font-size: 2rem; }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center; /* 모두 가운데 정렬 */
  }
  button.photo-btn {
    min-width: 70px;
    background-color: #001FE9;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 6px 12px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  button.photo-btn:hover {
    transform: scale(1.05);
  }
  /* 가운데 2px 파란 라인 */
  .divider {
    height: 2px;
    background-color: #001FE9;
    margin: 0 20px 40px 20px;
  }
  /* 줄바꿈을 위한 클래스 */
  .break-after {
    display: block;
    margin-right: 10px;
  }

  /* Gallery Overlay */
  #gallery-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  #gallery-content {
    position: relative;
    max-width: 90%;
    max-height: 80%;
  }
  #gallery-content img {
    width: 100%;
    max-height: 80vh;
    border-radius: 10px;
    user-select: none;
  }
  #gallery-close,
  #gallery-prev,
  #gallery-next {
    position: fixed;
    background: none;
    border: none;
    color: white;
    font-size: 3rem;
    cursor: pointer;
    user-select: none;
  }
  #gallery-close {
    top: 20px;
    right: 20px;
    z-index: 1010;
  }
  #gallery-prev {
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
    z-index: 1010;
  }
  #gallery-next {
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    z-index: 1010;
  }
  #gallery-counter {
    text-align: center;
    color: #FFF2DA;
    margin-top: 8px;
    font-size: 1rem;
  }
</style>
</head>
<body>
<div id="app">
  <header>MAYBE HAPPY ENDING</header>
  <main id="main-content">
    <!-- 내용 삽입 JS -->
  </main>
  <nav>
    <button id="tab-home-btn" class="active">홈</button>
    <button id="tab-photos-btn">사진</button>
    <button id="tab-music-btn">음악</button>
    <button id="tab-sheet-btn">악보</button>
    <button id="tab-info-btn">정보</button>
  </nav>
</div>

<!-- 갤러리 오버레이 -->
<div id="gallery-overlay">
  <button id="gallery-close" title="닫기">×</button>
  <button id="gallery-prev" title="이전">‹</button>
  <div id="gallery-content">
    <img id="gallery-img" src="" alt="Gallery Image" draggable="false" />
    <div id="gallery-counter"></div>
  </div>
  <button id="gallery-next" title="다음">›</button>
</div>

<script>
  const photoData = [
    { 
      name: 'Oliver',
      emoji: '😊',
      align: 'center',
      type: 'text',
      buttons: ['김재범', '신성민', '전성우', '정휘'],
      buttonsPhotos: [
        ['https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=800&q=80'],
        ['https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800&q=80'],
        ['https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80'],
        ['https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800&q=80', 'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80']
      ]
    },
    { 
      name: 'Claire',
      emoji: '😄',
      align: 'center',
      type: 'text',
      buttons: ['전미도', '최수진', '박지연', '박진주', '방민아'],
      buttonsPhotos: [
        ['https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80'],
        ['https://images.unsplash.com/photo-1518893063132-36e46dbe2428?w=800&q=80'],
        ['https://images.unsplash.com/photo-1501612780327-45045538702b?w=800&q=80'],
        ['https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800&q=80'],
        ['https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800&q=80']
      ]
    },
    { 
      name: 'James',
      emoji: '🙂',
      align: 'center',
      type: 'text',
      buttons: ['이시안', '고훈정', '박세훈'],
      buttonsPhotos: [
        ['https://images.unsplash.com/photo-1464820453369-31d2c0b651af?w=800&q=80'],
        ['https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800&q=80'],
        ['https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800&q=80']
      ]
    }
  ];

  let activeTab = 'home';
  let selectedPhotos = null;
  let currentPhotoIndex = 0;

  const mainContent = document.getElementById('main-content');
  const tabButtons = {
    home: document.getElementById('tab-home-btn'),
    photos: document.getElementById('tab-photos-btn'),
    music: document.getElementById('tab-music-btn'),
    sheet: document.getElementById('tab-sheet-btn'),
    info: document.getElementById('tab-info-btn')
  };

  function render() {
    Object.keys(tabButtons).forEach(key => {
      tabButtons[key].classList.toggle('active', key === activeTab);
    });

    mainContent.innerHTML = '';

    if (activeTab === 'home') {
      const homeDiv = document.createElement('div');
      homeDiv.className = 'tab-home';
      mainContent.appendChild(homeDiv);
    }
    else if (activeTab === 'photos') {
      photoData.forEach((person, idx) => {
        const personDiv = document.createElement('div');
        personDiv.className = 'person';
        if (person.name === 'Oliver') {
          personDiv.classList.add('oliver');
        } else {
          personDiv.classList.add('not-first');
        }

        const header = document.createElement('div');
        header.className = 'person-header center';
        header.innerHTML = `<span class="emoji">${person.emoji}</span><span>${person.name}</span>`;
        personDiv.appendChild(header);

        // 중간에 파란색 선 추가 (Oliver 다음에)
        if (person.name === 'Oliver') {
          const divider = document.createElement('div');
          divider.className = 'divider';
          personDiv.appendChild(divider);
        }
        // 그리고 Claire 다음에도 선 추가
        if (person.name === 'Claire') {
          const divider = document.createElement('div');
          divider.className = 'divider';
          personDiv.appendChild(divider);
        }

        const buttonsDiv = document.createElement('div');
        buttonsDiv.className = 'buttons center';

        person.buttons.forEach((btnText, btnIndex) => {
          const btn = document.createElement('button');
          btn.className = 'photo-btn';

          // 박지연에서 줄바꿈, 박진주, 방민아는 다음 줄에 같이 있도록 처리 (Claire에만 적용)
          if (person.name === 'Claire') {
            if (btnText === '박지연') {
              btn.classList.add('break-after');
            }
            if (btnText === '박진주') {
              btn.style.marginRight = '10px';
            }
          }

          btn.textContent = btnText;
          btn.addEventListener('click', () => openGallery(person.buttonsPhotos[btnIndex]));
          buttonsDiv.appendChild(btn);
        });

        personDiv.appendChild(buttonsDiv);
        mainContent.appendChild(personDiv);
      });
    }
    else if (activeTab === 'music') {
      const musicDiv = document.createElement('div');
      musicDiv.style.height = '100%';
      musicDiv.style.display = 'flex';
      musicDiv.style.alignItems = 'center';
      musicDiv.style.justifyContent = 'center';
      musicDiv.style.flexDirection = 'column';
      musicDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">🎵</div>
                            <p style="color:#888;">음악 라이브러리</p>`;
      mainContent.appendChild(musicDiv);
    }
    else if (activeTab === 'sheet') {
      const sheetDiv = document.createElement('div');
      sheetDiv.style.height = '100%';
      sheetDiv.style.display = 'flex';
      sheetDiv.style.alignItems = 'center';
      sheetDiv.style.justifyContent = 'center';
      sheetDiv.style.flexDirection = 'column';
      sheetDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">📄</div>
                            <p style="color:#888;">악보 보관함</p>`;
      mainContent.appendChild(sheetDiv);
    }
    else if (activeTab === 'info') {
      const infoDiv = document.createElement('div');
      infoDiv.style.height = '100%';
      infoDiv.style.display = 'flex';
      infoDiv.style.alignItems = 'center';
      infoDiv.style.justifyContent = 'center';
      infoDiv.style.flexDirection = 'column';
      infoDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">ℹ️</div>
                            <p style="color:#888;">정보</p>`;
      mainContent.appendChild(infoDiv);
    }
  }

  function openGallery(photos) {
    selectedPhotos = photos;
    currentPhotoIndex = 0;
    updateGallery();
    document.getElementById('gallery-overlay').style.display = 'flex';
  }

  function closeGallery() {
    selectedPhotos = null;
    currentPhotoIndex = 0;
    document.getElementById('gallery-overlay').style.display = 'none';
  }

  function updateGallery() {
    if (!selectedPhotos) return;
    const imgElem = document.getElementById('gallery-img');
    imgElem.src = selectedPhotos[currentPhotoIndex];
    const counter = document.getElementById('gallery-counter');
    counter.textContent = `${currentPhotoIndex + 1} / ${selectedPhotos.length}`;
  }

  function nextPhoto() {
    if (!selectedPhotos) return;
    currentPhotoIndex = (currentPhotoIndex + 1) % selectedPhotos.length;
    updateGallery();
  }

  function prevPhoto() {
    if (!selectedPhotos) return;
    currentPhotoIndex = (currentPhotoIndex - 1 + selectedPhotos.length) % selectedPhotos.length;
    updateGallery();
  }

  Object.keys(tabButtons).forEach(key => {
    tabButtons[key].addEventListener('click', () => {
      activeTab = key;
      render();
    });
  });

  document.getElementById('gallery-close').addEventListener('click', closeGallery);
  document.getElementById('gallery-next').addEventListener('click', nextPhoto);
  document.getElementById('gallery-prev').addEventListener('click', prevPhoto);

  render();
</script>
</body>
</html>
