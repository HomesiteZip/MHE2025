<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mobile Event App</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background-color: #FFF2DA;
    font-family: Arial, sans-serif;
  }
  #app {
    max-width: 400px;
    margin: 0 auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    border: 2px solid #001FE9;
    border-top: none;
  }
  header {
    text-align: center;
    font-weight: bold;
    font-size: 1.25rem;
    color: #001FE9;
    padding: 12px 0;
    border-bottom: 2px solid #001FE9;
    background-color: #FFF2DA;
  }
  main {
    flex: 1;
    overflow-y: auto;
    padding: 12px;
    background-color: #FFF2DA;
    position: relative;
  }
  nav {
    display: flex;
    border-top: 2px solid #001FE9;
  }
  nav button {
    flex: 1;
    padding: 10px 0;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    background-color: #FFF2DA;
    color: #001FE9;
    transition: background-color 0.3s, color 0.3s;
    border-right: 2px solid #001FE9;
  }
  nav button:last-child {
    border-right: none;
  }
  nav button.active {
    background-color: #001FE9;
    color: #FFF2DA;
  }
  .tab-home {
    height: 100%;
    background-image: url('https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=1200&q=80');
    background-size: cover;
    background-position: center;
  }
  .person {
    margin-bottom: 24px;
    max-width: 100%;
  }
  .person-header {
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 1.25rem;
    color: #001FE9;
    margin-bottom: 8px;
    gap: 6px;
  }
  .person-header.left { justify-content: flex-start; }
  .person-header.right { justify-content: flex-end; }
  .person-header.center { justify-content: center; }
  .emoji { font-size: 2rem; }
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .buttons.left { justify-content: flex-start; }
  .buttons.right { justify-content: flex-end; }
  .buttons.center { justify-content: center; }
  button.photo-btn {
    min-width: 70px;
    background-color: #001FE9;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 6px 12px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  button.photo-btn:hover {
    transform: scale(1.05);
  }
  /* Gallery Overlay */
  #gallery-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  #gallery-content {
    position: relative;
    max-width: 90%;
    max-height: 80%;
  }
  #gallery-content img {
    width: 100%;
    max-height: 80vh;
    border-radius: 10px;
    user-select: none;
  }
  #gallery-close,
  #gallery-prev,
  #gallery-next {
    position: fixed;
    background: none;
    border: none;
    color: white;
    font-size: 3rem;
    cursor: pointer;
    user-select: none;
  }
  #gallery-close {
    top: 20px;
    right: 20px;
  }
  #gallery-prev {
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
  }
  #gallery-next {
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
  }
  #gallery-counter {
    text-align: center;
    color: #FFF2DA;
    margin-top: 8px;
    font-size: 1rem;
  }
</style>
</head>
<body>
<div id="app">
  <header>MAYBE HAPPY ENDING</header>
  <main id="main-content">
    <!-- ÎÇ¥Ïö©ÏùÄ JSÎ°ú Ï±ÑÏõÄ -->
  </main>
  <nav>
    <button id="tab-home-btn" class="active">Ìôà</button>
    <button id="tab-photos-btn">ÏÇ¨ÏßÑ</button>
    <button id="tab-music-btn">ÏùåÏïÖ</button>
    <button id="tab-sheet-btn">ÏïÖÎ≥¥</button>
    <button id="tab-info-btn">Ï†ïÎ≥¥</button>
  </nav>
</div>

<!-- Í∞§Îü¨Î¶¨ Ïò§Î≤ÑÎ†àÏù¥ -->
<div id="gallery-overlay">
  <button id="gallery-close" title="Îã´Í∏∞">√ó</button>
  <button id="gallery-prev" title="Ïù¥Ï†Ñ">‚Äπ</button>
  <div id="gallery-content">
    <img id="gallery-img" src="" alt="Gallery Image" draggable="false" />
    <div id="gallery-counter"></div>
  </div>
  <button id="gallery-next" title="Îã§Ïùå">‚Ä∫</button>
</div>

<script>
  // Îç∞Ïù¥ÌÑ∞ (Î¶¨Ïï°Ìä∏Ïóê ÏûàÎçò photoData)
  const photoData = [
    { 
      name: 'Oliver',
      emoji: 'üòä',
      align: 'left',
      type: 'text',
      buttons: ['ÍπÄÏû¨Î≤î', 'Ïã†ÏÑ±ÎØº', 'Ï†ÑÏÑ±Ïö∞', 'Ï†ïÌúò'],
      photos: [
        'https://images.unsplash.com/photo-1511367461989-f85a21fda167?w=800&q=80',
        'https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?w=800&q=80',
        'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=800&q=80'
      ]
    },
    { 
      name: 'Claire',
      emoji: 'üòÑ',
      align: 'right',
      type: 'icon',
      rows: [[3], [2]],
      photos: [
        'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&q=80',
        'https://images.unsplash.com/photo-1518893063132-36e46dbe2428?w=800&q=80',
        'https://images.unsplash.com/photo-1501612780327-45045538702b?w=800&q=80'
      ]
    },
    { 
      name: 'James',
      emoji: 'üôÇ',
      align: 'center',
      type: 'icon',
      rows: [[3]],
      photos: [
        'https://images.unsplash.com/photo-1475721027785-f74eccf877e2?w=800&q=80',
        'https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?w=800&q=80',
        'https://images.unsplash.com/photo-1464820453369-31d2c0b651af?w=800&q=80'
      ]
    }
  ];

  // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÌÉ≠
  let activeTab = 'home';
  // Í∞§Îü¨Î¶¨ Í¥ÄÎ†® Î≥ÄÏàò
  let selectedPhotos = null;
  let currentPhotoIndex = 0;

  const mainContent = document.getElementById('main-content');

  // ÌÉ≠ Î≤ÑÌäºÎì§
  const tabButtons = {
    home: document.getElementById('tab-home-btn'),
    photos: document.getElementById('tab-photos-btn'),
    music: document.getElementById('tab-music-btn'),
    sheet: document.getElementById('tab-sheet-btn'),
    info: document.getElementById('tab-info-btn')
  };

  function render() {
    // ÌÉ≠ Î≤ÑÌäº active ÌÅ¥ÎûòÏä§ Ï≤òÎ¶¨
    Object.keys(tabButtons).forEach(key => {
      tabButtons[key].classList.toggle('active', key === activeTab);
    });

    // Ïª®ÌÖêÏ∏† Ï¥àÍ∏∞Ìôî
    mainContent.innerHTML = '';

    if (activeTab === 'home') {
      // Ìôà ÌÉ≠: Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Ï±ÑÏö∞Í∏∞
      const homeDiv = document.createElement('div');
      homeDiv.className = 'tab-home';
      mainContent.appendChild(homeDiv);
    }
    else if (activeTab === 'photos') {
      photoData.forEach(person => {
        const personDiv = document.createElement('div');
        personDiv.className = 'person';

        const header = document.createElement('div');
        header.className = 'person-header ' + (person.align || 'center');
        header.innerHTML = `<span class="emoji">${person.emoji}</span><span>${person.name}</span>`;
        personDiv.appendChild(header);

        const buttonsDiv = document.createElement('div');
        buttonsDiv.className = 'buttons ' + (person.align || 'center');

        if (person.type === 'text') {
          person.buttons.forEach(btnText => {
            const btn = document.createElement('button');
            btn.className = 'photo-btn';
            btn.textContent = btnText;
            btn.addEventListener('click', () => openGallery(person.photos));
            buttonsDiv.appendChild(btn);
          });
        }
        else if (person.type === 'icon') {
          person.rows.forEach(row => {
            const rowDiv = document.createElement('div');
            rowDiv.style.display = 'flex';
            rowDiv.style.justifyContent = person.align === 'left' ? 'flex-start' :
                                        person.align === 'right' ? 'flex-end' : 'center';
            rowDiv.style.gap = '10px';
            row.forEach(() => {
              const iconBtn = document.createElement('button');
              iconBtn.className = 'photo-btn';
              iconBtn.textContent = 'üì∑'; // ÏïÑÏù¥ÏΩò ÎåÄÏã† Ïù¥Î™®ÏßÄ ÏÇ¨Ïö©
              iconBtn.style.width = '60px';
              iconBtn.style.height = '60px';
              iconBtn.addEventListener('click', () => openGallery(person.photos));
              rowDiv.appendChild(iconBtn);
            });
            buttonsDiv.appendChild(rowDiv);
          });
        }

        personDiv.appendChild(buttonsDiv);
        mainContent.appendChild(personDiv);
      });
    }
    else if (activeTab === 'music') {
      const musicDiv = document.createElement('div');
      musicDiv.style.height = '100%';
      musicDiv.style.display = 'flex';
      musicDiv.style.alignItems = 'center';
      musicDiv.style.justifyContent = 'center';
      musicDiv.style.flexDirection = 'column';
      musicDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">üéµ</div>
                            <p style="color:#888;">ÏùåÏïÖ ÎùºÏù¥Î∏åÎü¨Î¶¨</p>`;
      mainContent.appendChild(musicDiv);
    }
    else if (activeTab === 'sheet') {
      const sheetDiv = document.createElement('div');
      sheetDiv.style.height = '100%';
      sheetDiv.style.display = 'flex';
      sheetDiv.style.alignItems = 'center';
      sheetDiv.style.justifyContent = 'center';
      sheetDiv.style.flexDirection = 'column';
      sheetDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">üìÑ</div>
                            <p style="color:#888;">ÏïÖÎ≥¥ Î≥¥Í¥ÄÌï®</p>`;
      mainContent.appendChild(sheetDiv);
    }
    else if (activeTab === 'info') {
      const infoDiv = document.createElement('div');
      infoDiv.style.height = '100%';
      infoDiv.style.display = 'flex';
      infoDiv.style.alignItems = 'center';
      infoDiv.style.justifyContent = 'center';
      infoDiv.style.flexDirection = 'column';
      infoDiv.innerHTML = `<div style="font-size:64px; color: #ccc; margin-bottom: 16px;">‚ÑπÔ∏è</div>
                            <p style="color:#888;">Ï†ïÎ≥¥</p>`;
      mainContent.appendChild(infoDiv);
    }
  }

  // Í∞§Îü¨Î¶¨ Ïó¥Í∏∞
  function openGallery(photos) {
    selectedPhotos = photos;
    currentPhotoIndex = 0;
    updateGallery();
    document.getElementById('gallery-overlay').style.display = 'flex';
  }

  // Í∞§Îü¨Î¶¨ Îã´Í∏∞
  function closeGallery() {
    selectedPhotos = null;
    currentPhotoIndex = 0;
    document.getElementById('gallery-overlay').style.display = 'none';
  }

  // Í∞§Îü¨Î¶¨ ÏÇ¨ÏßÑ Í∞±Ïã†
  function updateGallery() {
    if (!selectedPhotos) return;
    const imgElem = document.getElementById('gallery-img');
    imgElem.src = selectedPhotos[currentPhotoIndex];
    const counter = document.getElementById('gallery-counter');
    counter.textContent = `${currentPhotoIndex + 1} / ${selectedPhotos.length}`;
  }

  // Îã§Ïùå ÏÇ¨ÏßÑ
  function nextPhoto() {
    if (!selectedPhotos) return;
    currentPhotoIndex = (currentPhotoIndex + 1) % selectedPhotos.length;
    updateGallery();
  }

  // Ïù¥Ï†Ñ ÏÇ¨ÏßÑ
  function prevPhoto() {
    if (!selectedPhotos) return;
    currentPhotoIndex = (currentPhotoIndex - 1 + selectedPhotos.length) % selectedPhotos.length;
    updateGallery();
  }

  // ÌÉ≠ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Îì±Î°ù
  Object.keys(tabButtons).forEach(key => {
    tabButtons[key].addEventListener('click', () => {
      activeTab = key;
      render();
    });
  });

  // Í∞§Îü¨Î¶¨ Î≤ÑÌäº Ïù¥Î≤§Ìä∏
  document.getElementById('gallery-close').addEventListener('click', closeGallery);
  document.getElementById('gallery-next').addEventListener('click', nextPhoto);
  document.getElementById('gallery-prev').addEventListener('click', prevPhoto);

  // ÌéòÏù¥ÏßÄ Ï≤òÏùå Î°úÎìú Ïãú Î†åÎçîÎßÅ
  render();
</script>
</body>
</html>
